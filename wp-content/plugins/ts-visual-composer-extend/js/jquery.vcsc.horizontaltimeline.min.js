jQuery(document).ready(function(){function e(e){e.each(function(){var e=jQuery(this),i={};if(timelineDirection=e.attr("data-direction"),timelineStartEvent=parseInt(e.attr("data-startevent")),timelineMinDistance=parseInt(e.attr("data-minspace")),timelineMaxDistance=parseInt(e.attr("data-maxspace")),timelineLeftDistance=parseInt(e.attr("data-leftspace")),timelineRightDistance=parseInt(e.attr("data-rightspace")),timelineColumnsStack=parseInt(e.attr("data-columnsstack")),timelineTotalWidth=0,timelineEqualizer="true"==e.attr("data-equalizer")?!0:!1,timelineReverse="true"==e.attr("data-reverse")?!0:!1,timelineKeyboard="true"==e.attr("data-keyboard")?!0:!1,i.timelineWrapper=e.find(".ts-horizontal-timeline-wrapper"),i.timelinePreloader=e.find(".ts-horizontal-timeline-preloader"),i.timelineBullets=e.find(".ts-horizontal-timeline-bullets"),i.timelineContent=e.children(".ts-horizontal-timeline-content"),i.timelineItems=e.find(".ts-horizontal-timeline-items"),0==i.timelineItems.find("li").length)return!1;i.timelineBullets.find("li.ts-horizontal-timeline-quick").sort(function(e,t){var i=parseInt(jQuery(e).attr("data-timestamp")),n=parseInt(jQuery(t).attr("data-timestamp"));return timelineReverse?i>n?-1:n>i?1:0:n>i?-1:i>n?1:0}).appendTo(i.timelineBullets),i.timelineItems.find("li.ts-horizontal-timeline-single").sort(function(e,t){var i=parseInt(jQuery(e).attr("data-timestamp")),n=parseInt(jQuery(t).attr("data-timestamp"));return timelineReverse?i>n?-1:n>i?1:0:n>i?-1:i>n?1:0}).appendTo(i.timelineItems),i.eventsWrapper=i.timelineWrapper.children(".ts-horizontal-timeline-events"),i.fillingLine=i.eventsWrapper.children(".ts-horizontal-timeline-filling"),i.timelineEvents=i.eventsWrapper.find("a"),i.timelineDates=v(i.timelineEvents),i.timelineSmallest=g(i.timelineDates,timelineReverse),i.timelineNavigation=e.find(".ts-horizontal-timeline-navigation"),i.timelineNextPrev=e.find(".ts-horizontal-timeline-nextprev"),i.timelineBullets.find("li").each(function(e){e==timelineStartEvent?(timelineStartEvent=jQuery(this).attr("data-timestamp"),jQuery(this).find("a").addClass("selected")):jQuery(this).find("a").removeClass("selected")}),i.timelineContent.find("li").each(function(){jQuery(this).attr("data-timestamp")==timelineStartEvent?jQuery(this).addClass("selected"):jQuery(this).removeClass("selected")});var r=e.width(),l=o(i,timelineTotalWidth,timelineMinDistance,timelineMaxDistance,timelineLeftDistance,timelineRightDistance,timelineEqualizer,timelineReverse);if(e.addClass("loaded"),i.timelineNavigation.on("click",".next",function(e){e.preventDefault(),t(i,l,"next")}),i.timelineNavigation.on("click",".prev",function(e){e.preventDefault(),t(i,l,"prev")}),i.timelineNextPrev.on("click",".next",function(e){e.preventDefault(),n(i,l,"next")}),i.timelineNextPrev.on("click",".prev",function(e){e.preventDefault(),n(i,l,"prev")}),i.eventsWrapper.on("click","a",function(e){e.preventDefault(),i.timelineEvents.removeClass("selected"),jQuery(this).addClass("selected"),u(jQuery(this)),s(jQuery(this),i.fillingLine,l),m(i,jQuery(this))}),"ontouchstart"in document.documentElement)if(1==$TS_VCSC_Hammer_ReleaseNew){var c=document.getElementById(i.timelineWrapper.attr("id"));c=new Hammer(c,{prevent_default:!0}),c.on("swipeleft",function(e){return e.preventDefault(),t(i,l,"next"),!1}).on("swiperight",function(e){return e.preventDefault(),t(i,l,"prev"),!1});var p=document.getElementById(i.timelineContent.attr("id"));p=new Hammer(p,{prevent_default:!0}),p.on("swipeleft",function(e){return e.preventDefault(),n(i,l,"next"),!1}).on("swiperight",function(e){return e.preventDefault(),n(i,l,"prev"),!1})}else{var c=new Hammer(i.timelineWrapper);c.on("swipeleft",function(){return t(i,l,"next"),!1}).on("swiperight",function(){return t(i,l,"prev"),!1});var p=new Hammer(i.timelineContent);p.on("swipeleft",function(){return n(i,l,"next"),!1}).on("swiperight",function(){return n(i,l,"prev"),!1})}timelineKeyboard&&jQuery(document).keyup(function(t){"37"==t.which&&y(e.get(0))?n(i,l,"prev"):"39"==t.which&&y(e.get(0))&&n(i,l,"next")}),a(i),i.timelinePreloader.hide(),jQuery(window).on("debouncedresize",function(){r=e.width(),l=o(i,timelineTotalWidth,timelineMinDistance,timelineMaxDistance,timelineLeftDistance,timelineRightDistance,timelineEqualizer,timelineReverse),f(i),d(i)})})}function t(e,t,i){var n=c(e.eventsWrapper),a=Number(e.timelineWrapper.css("width").replace("px",""));"next"==i?l(e,n-a+timelineMinDistance,a-t):l(e,n+a-timelineMinDistance)}function n(e,t,i){var n=e.timelineContent.find(".selected"),a="next"==i?n.next():n.prev();if(a.length>0){var l=e.eventsWrapper.find(".selected"),o="next"==i?l.parent("li").next("li").children("a"):l.parent("li").prev("li").children("a");s(o,e.fillingLine,t),m(e,o),o.addClass("selected"),l.removeClass("selected"),u(o),r(i,o,e)}}function a(e){var t=e.timelineContent.find(".selected").index(),i=e.timelineContent.find("li").length-1;e.timelineNextPrev.find(".prev").removeClass("inactive"),e.timelineNextPrev.find(".next").removeClass("inactive"),0==t?e.timelineNextPrev.find(".prev").addClass("inactive"):t==i&&e.timelineNextPrev.find(".next").addClass("inactive")}function r(e,t,i){var n=window.getComputedStyle(t.get(0),null),a=Math.ceil(Number(n.getPropertyValue("left").replace("px",""))),r=Math.ceil(Number(i.timelineWrapper.width())),s=Math.ceil(Number(i.eventsWrapper.width())),o=Math.ceil(c(i.eventsWrapper));("next"==e&&a>r-o||"prev"==e&&-o>a)&&l(i,-a+r/2,r-s)}function l(e,t,i){var n=e.eventsWrapper.get(0);t=t>0?0:t,t="undefined"!=typeof i&&i>t?i:t,p(n,"translateX",t+"px"),0==t?e.timelineNavigation.find(".prev").addClass("inactive"):e.timelineNavigation.find(".prev").removeClass("inactive"),t==i?e.timelineNavigation.find(".next").addClass("inactive"):e.timelineNavigation.find(".next").removeClass("inactive")}function s(e,t,i){var n=window.getComputedStyle(e.get(0),null),a=n.getPropertyValue("left"),r=n.getPropertyValue("width");a=Number(a.replace("px",""))+Number(r.replace("px",""))/2;var l=a/i;p(t.get(0),"scaleX",l)}function o(e,t,n,a,l,o,m,d){var f=e.timelineWrapper.width(),u=0,c=0,p=0,v=0;if(a>f&&(a=f-2*n),0>a&&(a=n),m){for(i=0;i<e.timelineDates.length;i++)p=v+n,e.timelineEvents.eq(i).css("left",p+"px"),v=p;t=p}else{for(i=0;i<e.timelineDates.length;i++)u=0==i?0:h(e.timelineDates[i-1],e.timelineDates[i],d,"minutes",!1),c=Math.ceil(u/e.timelineSmallest*n),c>a?c=a:n>c&&(c=n),p=0==i?v+l:v+c,e.timelineEvents.eq(i).css("left",p+"px"),v=p;t=p}return t+=o,f>t&&(t=f),e.eventsWrapper.css("width",t+"px"),s(e.eventsWrapper.find("a.selected"),e.fillingLine,t),r("next",e.eventsWrapper.find("a.selected"),e),t}function m(e,t){var i=t.attr("data-date"),n=e.timelineContent.find(".selected"),r=e.timelineContent.find('[data-date="'+i+'"]'),l=r.outerHeight();if(r.index()>n.index())var s="ts-horizontal-timeline-single selected enter-right",o="ts-horizontal-timeline-single leave-left";else var s="ts-horizontal-timeline-single selected enter-left",o="ts-horizontal-timeline-single leave-right";r.attr("class",s),n.attr("class",o).one("webkitAnimationEnd oanimationend msAnimationEnd animationend",function(){n.removeClass("leave-right leave-left"),r.removeClass("enter-left enter-right")}),e.timelineContent.css("height",l+"px"),a(e),f(e)}function d(e){var t=e.timelineContent.find(".selected"),i=t.outerHeight();e.timelineContent.css("height",i+"px")}function f(e){timelineWrapperWidth=e.timelineItems.width(),timelineColumnsStack=parseInt(e.timelineItems.attr("data-columnsstack")),e.timelineItems.children("li.ts-horizontal-timeline-single").each(function(){"true"==jQuery(this).attr("data-columns")&&(timelineColumnsStack>=timelineWrapperWidth?jQuery(this).removeClass("ts-horizontal-timeline-columns"):jQuery(this).addClass("ts-horizontal-timeline-columns"))})}function u(e){e.parent("li").prevAll("li").children("a").addClass("older-event").end().end().nextAll("li").children("a").removeClass("older-event")}function c(e){var t=window.getComputedStyle(e.get(0),null),i=t.getPropertyValue("-webkit-transform")||t.getPropertyValue("-moz-transform")||t.getPropertyValue("-ms-transform")||t.getPropertyValue("-o-transform")||t.getPropertyValue("transform");if(i.indexOf("(")>=0){var i=i.split("(")[1];i=i.split(")")[0],i=i.split(",");var n=i[4]}else var n=0;return Number(n)}function p(e,t,i){e.style["-webkit-transform"]=t+"("+i+")",e.style["-moz-transform"]=t+"("+i+")",e.style["-ms-transform"]=t+"("+i+")",e.style["-o-transform"]=t+"("+i+")",e.style.transform=t+"("+i+")"}function v(e){var t=[];return e.each(function(){var e=jQuery(this),i=e.attr("data-timestamp");t.push(1e3*i)}),t}function h(e,t,i,n,a){var r,l,s,o,m;return m=t-e,a?(o=Math.floor(m/1e3),s=Math.floor(o/60),o%=60,l=Math.floor(s/60),s%=60,r=Math.floor(l/24),l%=24):(o=Math.floor(m/1e3),s=Math.floor(o/60),l=Math.floor(s/60),r=Math.floor(l/24)),"days"==n?Math.abs(r):"hours"==n?Math.abs(l):"minutes"==n?Math.abs(s):"seconds"==n?Math.abs(o):"millis"==n?Math.abs(m):"all"==n?{days:Math.abs(r),hours:Math.abs(l),minutes:Math.abs(s),seconds:Math.abs(o),millis:Math.abs(m)}:void 0}function g(e,t){var n=[];for(i=1;i<e.length;i++){var a=h(e[i-1],e[i],t,"minutes",!1);n.push(a)}return Math.min.apply(null,n)}function y(e){for(var t=e.offsetTop,i=e.offsetLeft,n=e.offsetWidth,a=e.offsetHeight;e.offsetParent;)e=e.offsetParent,t+=e.offsetTop,i+=e.offsetLeft;return t<window.pageYOffset+window.innerHeight&&i<window.pageXOffset+window.innerWidth&&t+a>window.pageYOffset&&i+n>window.pageXOffset}var w=jQuery(".ts-horizontal-timeline-main");w.length>0&&e(w)});